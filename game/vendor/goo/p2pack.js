/* Goo Engine p2pack 
 * Copyright 2015 Goo Technologies AB
 */
(function(window){function f(){"use strict";
define("goo/addons/p2pack/P2Component",["goo/entities/components/Component"],function(e){function t(t){e.apply(this,arguments),this.type="P2Component",this.settings=t||{},this.mass=t.mass!==undefined?t.mass:0,this.linearDamping=t.linearDamping!==undefined?t.linearDamping:0,this.angularDamping=t.angularDamping!==undefined?t.angularDamping:0,this.shapes=t.shapes!==undefined?t.shapes:[],this.scale=t.scale!==undefined?t.scale:1,this.offsetX=t.offsetX!==undefined?t.offsetX:0,this.offsetY=t.offsetY!==undefined?t.offsetY:0,this.offsetZ=t.offsetZ!==undefined?t.offsetZ:0,this.offsetAngleX=t.offsetAngleX!==undefined?t.offsetAngleX:0,this.offsetAngleY=t.offsetAngleY!==undefined?t.offsetAngleY:0,this.offsetAngleZ=t.offsetAngleZ!==undefined?t.offsetAngleZ:0}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}),define("goo/addons/p2pack/P2System",["goo/entities/systems/System"],function(e){function n(n){e.call(this,"P2System",["P2Component","TransformComponent"]),n=n||{},this.world=new t.World({gravity:n.gravity||[0,-9.82]}),this.stepFrequency=n.stepFrequency||60}function r(e,t){var n=t.body.position,r=t.scale;e.transform.translation.setDirect(n[0]*r,n[1]*r,0),e.transform.rotation.fromAngles(t.offsetAngleX,t.offsetAngleY,t.offsetAngleZ+t.body.angle),e.setUpdated()}var t=window.p2;return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.inserted=function(e){var n=e.p2Component,i=e.transformComponent,s=new t.Body({mass:n.mass,damping:n.damping,angularDamping:n.angularDamping}),s=n.body=new t.Body({mass:n.mass,position:[i.transform.translation.x,i.transform.translation.y]});for(var o=0;o<n.shapes.length;o++){var u=n.shapes[o],a;switch(u.type){case"box":a=new t.Rectangle(u.width,u.height);break;case"circle":a=new t.Circle(u.radius);break;case"plane":a=new t.Plane;break;default:throw new Error("p2 shape '"+u.type+"' not recognized")}s.addShape(a,u.offset,u.angle)}n.body=s,r(i,n),this.world.addBody(s)},n.prototype.deleted=function(e){var t=e.p2Component;t&&this.world.removeBody(t.body)},n.prototype.process=function(e){this.world.step(1/this.stepFrequency);for(var t=0;t<e.length;t++){var n=e[t],i=n.p2Component;r(n.transformComponent,i)}},n}),define("goo/addons/p2pack/P2Register",["goo/scripts/Scripts","goo/addons/p2pack/P2Component","goo/addons/p2pack/P2System"],function(e){var t=["goo/scripts/Scripts","goo/addons/p2pack/P2Component","goo/addons/p2pack/P2System"];for(var n=1;n<t.length;n++){var r=t[n].slice(t[n].lastIndexOf("/")+1);e.addClass(r,arguments[n])}}),require(["goo/addons/p2pack/P2Component","goo/addons/p2pack/P2Register","goo/addons/p2pack/P2System"],function(e,t,n){var r=window.goo;if(!r)return;r.P2Component=e,r.P2Register=t,r.P2System=n}),define("goo/addons/p2pack/p2pack",function(){});
}try{
if(window.localStorage&&window.localStorage.gooPath){
window.require.config({
paths:{goo:localStorage.gooPath}
});
}else f()
}catch(e){f()}
})(window)